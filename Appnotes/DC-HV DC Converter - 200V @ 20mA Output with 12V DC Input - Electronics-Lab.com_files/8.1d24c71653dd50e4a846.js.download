(this.webpackJsonp=this.webpackJsonp||[]).push([[8],{113:function(e,t,r){"use strict";r.r(t);r(77),r(70);var n=r(29),a=r.n(n),l=r(117),o=(r(71),r(75),r(76),r(121),r(72),r(39),r(69),r(73),r(66),r(115),r(67),r(74),r(68),r(116)),c=r.n(o);r(188);function i(e,t){Object(n.useEffect)((function(){if(null!==t){var r=window.setTimeout(e,t);return function(){return window.clearTimeout(r)}}}),[t])}
function s(e){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}
function u(e,t){Object(n.useEffect)((function(){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}}))}
var m=r(273);function f(e){return a.a.createElement(m.a,{in:Boolean(e.in),classNames:"fade",timeout:500,mountOnEnter:!0,unmountOnExit:!0},e.children)}
function d(e){return a.a.createElement(m.a,{in:Boolean(e.in),classNames:"".concat("slide","-").concat(e.from),timeout:500,mountOnEnter:!0,unmountOnExit:!0},e.children)}
function p(e){return c()({"o-40":e.disabled,"pointer bg-animate hover-bg-black-20":!e.disabled},"br2",e.className)}
function b(e){var t=e.onClick,r=e.title,n=e.children,l=e.type||"button",o=Boolean(e.disabled),c=p(e);return a.a.createElement("button",{type:l,onClick:t,disabled:o,className:c,title:r,suppressHydrationWarning:!0},n)}
function h(e){e.preventDefault()}
function v(e){e.stopPropagation()}
function y(e){e.currentTarget.select()}
var E=r(191),g=r(154),w=r(193),N=r(194);function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
var j={check:"fas","check-square":"far","chevron-left":"fas","chevron-right":"fas",circle:"far",cog:"fas",copy:"far","dot-circle":"far",expand:"fas",eye:"far","eye-slash":"far","file-download":"fas","file-upload":"fas",plus:"fas","question-circle":"fas","search-plus":"fas","search-minus":"fas","sliders-h":"fas",spinner:"fas",square:"far",times:"fas","trash-alt":"far"};function S(e){var t=e.name,r=e.style,n=e.faProps,l=[j[t],t],o=c()(e.className,"relative w2 h2 pa2");return a.a.createElement("div",{className:o,style:r},a.a.createElement("span",{className:"db absolute absolute--center"},a.a.createElement(E.a,O({icon:l},n))))}
function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
g.b.add(N.a,w.a,N.b,N.c,w.b,N.d,w.c,w.d,N.e,w.e,w.f,N.f,N.g,N.h,N.j,N.k,N.l,N.m,w.g,N.n,w.h,N.i);function A(e){var t=k(Object(n.useState)(!1),2),r=t[0],l=t[1],o=c()("flex items-center bn pa0 br2 pointer c-animate overflow-hidden",r?"white bg-red hover-bg-dark-red":"red bg-white hover-bg-black-20",e.className);return u("click",(function(){return r&&l(!1)})),a.a.createElement("button",{type:"button",onClick:function(t){v(t),r?(l(!1),e.onClick()):l(!0)},className:o},a.a.createElement(S,{name:"trash-alt"}),a.a.createElement("div",{className:c()("flex-none mw-animate overflow-hidden",r?"mw4":"mw0")},a.a.createElement("span",{className:"dib pl1 pr2"},"delete?")))}
var C=r(140),I=r.n(C);function F(e){var t=e.color.slice(0,7),r="dark"===I()(t),n=c()("border-box flex-none pv1 ph2 br-pill code f6",r?"white":"near-black ba",e.className),l={backgroundColor:t};return a.a.createElement("span",{className:n,style:l},t)}
function M(e){var t=e.title,r=e.open,n=e.children,l=e.close;return a.a.createElement(d,{in:r,from:"right"},a.a.createElement("section",{className:"fixed top-1 right-1 z-2 w-25 nt2 nr2 pv2 ph3 br3 near-black bg-white shadow"},a.a.createElement("div",{className:"flex items-center mb3"},a.a.createElement("h2",{className:"mr-auto f3 lh-title mv0 normal"},t),a.a.createElement(b,{onClick:l,className:"flex-none nr2 f4"},a.a.createElement(S,{name:"times"}))),n))}
r(127),r(141);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function V(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}
return a}
function T(e){var t=e.className,r=e.disabled,n=e.children,l=V(e,["className","disabled","children"]),o=c()("flex items-center",t,{pointer:!r});return a.a.createElement("label",P({className:o},l),n)}
function U(e){return a.a.createElement("input",P({className:"clip"},e))}
function z(e){var t=e.className,r=e.children,n=V(e,["className","children"]),l=e.value||!0===e.checked?"check-square":"square";return a.a.createElement(T,{className:t},a.a.createElement(U,P({type:"checkbox"},n)),a.a.createElement(S,{className:"nl2",name:l}),r)}
function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function D(e){var t=Object(n.useRef)(null),r=L(Object(n.useState)(!1),2),l=r[0],o=r[1];Object(n.useEffect)((function(){var e=function(){return o(!0)};return t.current&&(t.current.complete?e():(o(!1),t.current.addEventListener("load",e))),function(){t.current&&t.current.removeEventListener("load",e)}}));var i=e.url,s=e.spinnerColor,u=c()("flex items-center justify-center",e.className),m=l?'url("'.concat(i,'") no-repeat center/contain'):"transparent";return a.a.createElement("div",{className:u,style:{background:m}},a.a.createElement("img",{className:"clip",ref:t,src:i}),!l&&a.a.createElement(S,{name:"spinner",className:"f2",style:{color:s},faProps:{pulse:!0}}))}
function R(e){var t=e.width||e.height||"32px",r=e.height||t||"32px",n=e.color||"currentColor";return a.a.createElement("svg",{width:"".concat(t),height:"".concat(r),fill:n,viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",className:c()("dib",e.className)},a.a.createElement("path",{d:"M22 14H36V0H16L0 16V36H14V22L22 14Z M36 28C36 32.4183 32.4183 36 28 36C23.5817 36 20 32.4183 20 28C20 23.5817 23.5817 20 28 20C32.4183 20 36 23.5817 36 28Z"}))}
function _(e){var t=e.children,r=e.onDragOver,n=e.onDrop;return a.a.createElement("main",{className:"sans relative overflow-hidden h-100 pa3 white bg-gradient test",onDragOver:r,onDrop:n},t)}
function H(e){var t=e.subtitle,r=e.className;return a.a.createElement("div",{className:c()("dib",r)},a.a.createElement(R,{className:"pl1 mr3 v-btm brand"}),a.a.createElement("h1",{className:"dib mv0 f3 lh-title normal"},"tracespace",t&&a.a.createElement("span",{className:"b"}," ".concat(t))))}
function $(e){var t=e.title,r=e.children;return a.a.createElement("section",{className:"tl mb4"},a.a.createElement("h3",{className:"mt0 mb2 f5 lh-title b"},t),r)}
function G(e){return a.a.createElement("div",{className:"dib w-50 pr3 v-top br"},e.children)}
function q(e){return a.a.createElement("div",{className:"dib w-50 pl3 v-top"},e.children)}
var W=a.a.memo(Z);function Z(e){var t=e.source,r=e.className;return t?a.a.createElement("div",{className:r,dangerouslySetInnerHTML:{__html:t}}):null}
r(196),r(119);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
var Y={x:0,y:0,step:8},J=Math.log(.0125),K=(Math.log(20)-J)/16,Q=new Array(17).fill(0).map((function(e,t){return Math.pow(Math.E,J+K*t)}));function ee(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=e.x,l=e.y,o=e.step,c=re(o),i=c.scale,s=re(o+t),u=s.step,m=s.scale,f=m/i;return{step:u,x:a+(f-1)*(a-r+.5),y:l+(f-1)*(l-n+.5)}}
function te(e,t,r){return X({},e,{x:e.x+t,y:e.y+r})}
function re(e){return e=Math.round(e),e=Math.max(0,e),{step:e=Math.min(16,e),scale:Q[e]}}
r(198);var ne=function(e){return{x:e.pageX/window.innerWidth,y:e.pageY/window.innerHeight}};function ae(e){var t=e.pan,r=e.zoom,l=e.containerRef,o=e.children,c=Object(n.useRef)(null),i=Object(n.useRef)(0);return u("wheel1",(function(e){var t=e.deltaMode,n=e.deltaY,a=t===e.DOM_DELTA_LINE?0:20;if(i.current+=Math.sign(n),Math.abs(i.current)>a){var l=Math.sign(-i.current)||0,o=ne(e),c=o.x,s=o.y;i.current=0,r(l,c,s)}})),a.a.createElement("div",{ref:l,className:"absolute absolute--fill",onMouseDown:function(e){return c.current=ne(e)},onMouseUp:function(){return c.current=null},onMouseMove:function(e){if(c.current){var r=c.current,n=r.x,a=r.y,l=ne(e),o=l.x,i=l.y;t(o-n,i-a),c.current={x:o,y:i}}}},a.a.createElement("div",{className:"absolute top-50 left-50 tf-center w-100"},o))}
function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function ce(e){var t=le(Object(n.useState)(!1),2),r=t[0],l=t[1],o=e.step,c=e.reset,i=e.zoom,s=e.zoomIn,u=e.zoomOut,m="".concat(100*function(e){return re(e).step/16}(o),"%"),f=function(e){var t=e.currentTarget.getBoundingClientRect(),r=t.left,n=t.width,a=re(16*((e.clientX-r)/n)).step;i(a-o)};return a.a.createElement("div",{className:"absolute absolute--center-w-third bottom-1 z-1 w-third flex items-center f5"},a.a.createElement(b,{className:"absolute bottom-2 left-50 tf-center-x",onClick:c,title:"Reset pan and zoom"},a.a.createElement(S,{name:"expand"})),a.a.createElement(b,{className:"flex-none",onClick:u,title:"Zoom out"},a.a.createElement(S,{name:"search-minus"})),a.a.createElement("span",{className:"relative w-100 h2 flex items-center grab",onMouseDown:function(e){l(!0),f(e)},onMouseUp:function(){return l(!1)},onMouseMove:r?f:void 0},a.a.createElement("span",{className:"dib pt2 bg-white shadow w-100"}),a.a.createElement("span",{className:"absolute w1 h1 top-50 tf-center bg-brand o-70 left-animate",style:{left:m}})),a.a.createElement(b,{className:"flex-none",onClick:s,title:"Zoom in"},a.a.createElement(S,{name:"search-plus"})))}
r(128),r(156);var ie=r(200),se=r.n(ie);function ue(e){var t=e.layerVisibility,r=e.viewBox,n=e.className,l=e.layers.filter((function(e){return e.converter.layer.length>0}));return a.a.createElement("svg",{className:c()(n,"overflow-visible"),strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"0",fillRule:"evenodd",viewBox:se.a.asString(r)},l.map((function(e){return a.a.createElement("defs",{key:e.id,dangerouslySetInnerHTML:{__html:e.converter.defs.join("")}})})),a.a.createElement("g",{transform:"translate(0,".concat(r[3]+2*r[1],") scale(1, -1)")},l.map((function(e){var r=e.converter,n=e.scale,l={id:e.id,dangerouslySetInnerHTML:{__html:r.layer.join("")}};return 1!==n&&(l.transform="scale(".concat(n,")")),a.a.createElement("g",{key:e.id,fill:e.color,stroke:e.color,className:t[e.id]?"o-40":"o-0"},a.a.createElement("g",l))}))))}
var me=a.a.memo(ue);function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
var be=function(e){return "".concat(100*e,"%")},he=function(e){return e?e.id:null};function ve(){var e=Object(l.useAppState)(),t=e.mode,r=e.board,o=e.loading,i=e.layerVisibility,u=de(Object(n.useState)(Y),2),m=u[0],p=u[1],b=s(r),h=Object(n.useRef)(null),v=!o&&null!==r,y={step:m.step,reset:function(){return p(Y)},pan:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(te.apply(void 0,[m].concat(t)))},zoom:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(ee.apply(void 0,[m].concat(t)))},zoomIn:function(){return p(ee(m,1))},zoomOut:function(){return p(ee(m,-1))}};return Object(n.useLayoutEffect)((function(){if(h.current){var e=m.x,t=m.y,r=re(m.step).scale,n="translate(".concat(be(e),",").concat(be(t),") scale(").concat(r,")");h.current.style.transform=n}})),Object(n.useEffect)((function(){he(r)!==he(b)&&y.reset()}),[r,b]),a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{in:v},a.a.createElement(ae,fe({},y,{containerRef:h}),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement(W,{className:c()("w-100",{dn:"top"!==t}),source:r.top}),a.a.createElement(W,{className:c()("w-100",{dn:"bottom"!==t}),source:r.bottom}),a.a.createElement(me,{className:c()("w-100",{clip:"layers"!==t}),viewBox:r.viewBox,layers:r.layers,layerVisibility:i})))),a.a.createElement(d,{in:v,from:"bottom"},a.a.createElement(ce,y)))}
r(157);var ye=r(118),Ee=r(135),ge=(r(125),r(129),r(136),[ye.SIDE_TOP,ye.SIDE_ALL]),we=[ye.SIDE_BOTTOM,ye.SIDE_ALL];function Ne(e){var t=Object(l.useAppState)(),r=t.mode,n=t.layerVisibility,o=t.dispatch,c=e.id,i=e.side,s=e.type,u=e.converter,m=e.color,f=e.className,d=null===s||0===u.layer.length||"layers"!==r,p=function(e,t,r,n,a){return null!==t&&0!==n.layer.length&&("layers"===e&&a||"top"===e&&ge.includes(r)||"bottom"===e&&we.includes(r))}(r,s,i,u,n[c]),h=function(e,t){return "layers"!==e?"Cannot change visibility in board mode":t?"Unable to render file":"Toggle layer visibility (shift+click to toggle other layers)"}(r,d),v={name:p?"eye":"eye-slash"};return "layers"===r&&p&&(v.style={backgroundColor:m,color:"dark"===I()(m)?"white":"currentColor"}),a.a.createElement(b,{className:f,title:h,disabled:d,onClick:function(e){return o(Object(l.toggleVisibility)(c,e.shiftKey))}},a.a.createElement(S,v))}
function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function je(e){var t,r,n,l=e.id,o=e.side,i=e.type,s=e.converter,u=e.filename,m=e.color,d=e.showFilenames;return a.a.createElement("li",{className:"flex items-center h2 mb2 pl3 br3 overflow-hidden bg-white shadow"},a.a.createElement("p",{className:c()("f6 lh-title mv0 w-auto mr-auto",(t={},r="flex-none",n=d,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t))},i||"unknown"),a.a.createElement(f,{in:d},a.a.createElement("p",{className:"f6 lh-title w-60 mv0 ph2 code truncate"},u)),a.a.createElement(Ne,Oe({id:l,side:o,type:i,converter:s,color:m},{className:"dib br0 f5 flex-none"})))}
function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function ke(e){var t=e.label,r=e.layers,n=e.showFilenames;return 0===r.length?null:a.a.createElement("li",null,a.a.createElement("h3",{className:"mv2 pl3 lh-title f5 b"},t),a.a.createElement("ul",{className:"list pl0 mv0 near-black"},r.map((function(e){return a.a.createElement(je,Se({key:e.id},e,{showFilenames:n}))}))))}
var xe=[{label:"top",side:ye.SIDE_TOP},{label:"bottom",side:ye.SIDE_BOTTOM},{label:"inner",side:ye.SIDE_INNER},{label:"mechanical",side:ye.SIDE_ALL},{label:"other",side:null}];function Ae(e){var t=e.layers,r=e.showFilenames;return a.a.createElement("div",{className:c()("absolute left-0 top-5 bottom-5 overflow-y-hidden w-animate",r?"w-third":"w-sixth")},a.a.createElement("div",{onWheel:v,className:"w-100 mxh-100 overflow-y-auto ph3 tf-flip-x scrollbar-white"},a.a.createElement("ul",{className:"list mt0 mb3 pl0 tf-flip-x"},xe.map((function(e){return a.a.createElement(ke,{key:e.label,label:e.label,layers:t.filter((function(t){return t.side===e.side})).sort(Ee.d),showFilenames:r})})))))}
function Ce(e){var t=e.showFilenames,r=e.toggle;return a.a.createElement(b,{className:"absolute left-1 bottom-2 flex items-center f5",onClick:r},a.a.createElement(S,{name:t?"chevron-left":"chevron-right"}),a.a.createElement("p",{className:"dib lh-title mv0 ml2 mr3"},"".concat(t?"Hide":"Show"," filenames")))}
function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function Me(){var e=Object(l.useAppState)(),t=e.loading,r=e.board,o=Ie(Object(n.useState)(!1),2),c=o[0],i=o[1],s=r?r.layers:[],u=!t&&null!==r;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d,{in:u,from:"left"},a.a.createElement(Ae,{layers:s,showFilenames:c})),a.a.createElement(f,{in:u},a.a.createElement(Ce,{showFilenames:c,toggle:function(){return i(!c)}})))}
function Pe(e){var t=e.show,r=e.toggle;return a.a.createElement(b,{className:"absolute top-5 right-1 flex items-center f5",onClick:r},a.a.createElement("p",{className:"dib lh-title mv0 ml3 mr2"},"".concat(t?"Hide":"Show"," saved boards")),a.a.createElement(S,{name:t?"chevron-right":"chevron-left"}))}
function Ve(e){var t=e.id,r=e.name,n=e.selected,l=e.options,o=e.thumbnail,i=l.color.sm||"rgba(00, 66, 00, 0.75)";return a.a.createElement("li",{className:c()("dib w-50 pl3 pb3 fr",{pointer:!n}),onClick:function(){return!n&&e.onClick(t)}},a.a.createElement("div",{className:c()("relative overflow-hidden w-100 h4 br3 shadow")},a.a.createElement("div",{className:"w-100 h-100 bg-white"},a.a.createElement("p",{className:c()("f6 lh-title mv0 mh4 pt2 tc truncate",{b:n})},r),a.a.createElement(D,{url:o,spinnerColor:i,className:"absolute top-2 bottom-1 left-1 right-1"}))))}
function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function Ue(e){var t=e.selectedId,r=e.boards,n=e.onItemClick;return a.a.createElement("div",{className:"absolute right-0 top-7 bottom-5 w-third overflow-hidden"},a.a.createElement("div",{onWheel:v,className:"w-100 mxh-100 ph3 overflow-y-auto scrollbar-white"},a.a.createElement("ul",{className:"list mt1 mb0 pl0 near-black"},r.map((function(e){return a.a.createElement(Ve,Te({},e,{key:e.id,selected:e.id===t,onClick:n}))})))))}
function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function Be(){var e=Object(l.useAppState)(),t=e.mode,r=e.loading,o=e.board,c=e.savedBoards,i=e.dispatch,u=ze(Object(n.useState)(null===t),2),m=u[0],p=u[1],b=ze(Object(n.useState)(o?o.id:null),2),h=b[0],v=b[1],y=s(r);Object(n.useEffect)((function(){y&&!r&&o&&(p(!1),v(o.id))}),[y,r,o]);var E=c.length>0,g=E&&m;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{in:E},a.a.createElement(Pe,{show:g,toggle:function(){return p(!m)}})),a.a.createElement(d,{in:g,from:"right"},a.a.createElement(Ue,{selectedId:h,boards:c,onItemClick:function(e){i(Object(l.getBoard)(e)),v(e)}})))}
r(164),r(208);var De="Mike Cousins",Re="git+https://github.com/tracespace/tracespace.git".match(/git\+(https:\/\/.+).git/),_e=Re?Re[1]:"#",He="".concat(_e,"/graphs/contributors"),$e="".concat(_e,"/blob/v").concat("4.2.5","/PRIVACY.md"),Ge=r(183),qe="tracespace v".concat("4.2.5");function We(e){var t=Object(l.useAppState)(),r=t.appPreferences,n=t.dispatch,o=e.open,c=e.close;return a.a.createElement(M,{title:"app settings",open:o,close:c},a.a.createElement(z,{checked:r.analyticsOptIn||!1,className:"mv2",onChange:function(e){n(Object(l.updateAppPreferences)({analyticsOptIn:e.target.checked}))}},"send usage data to tracespace"),a.a.createElement(T,{className:"mv2"},a.a.createElement("span",{className:"mr-auto"},"delete all saved boards"),a.a.createElement(A,{className:"nr2",onClick:function(){n(Object(l.deleteAllBoards)()),c()}})),a.a.createElement("footer",{className:"mt3 mb1 f7 lh-copy"},a.a.createElement(T,null,a.a.createElement("span",{className:"flex-none mr2"},"analytics user id",":"),a.a.createElement("input",{className:"w-100 bn bg-transparent",type:"text",value:Object(Ge.b)()||"N/A",onFocus:y,readOnly:!0})),qe))}
var Ze=r(126);function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function Ke(){var e=Object(l.useAppState)(),t=e.appPreferences,r=e.dispatch,o=Ye(Object(n.useState)(!1),2),c=o[0],s=o[1];return i((function(){return s(!0)}),null==t.analyticsOptIn?1e3:null),a.a.createElement(f,{in:c&&null==t.analyticsOptIn},a.a.createElement(Ze.c,{initialValues:{analyticsOptIn:!0},onSubmit:function(e){return r(Object(l.updateAppPreferences)(e))}},(function(){})))}
function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
var tt="https://github.com/tracespace/tracespace/blob/v".concat("4.2.5","/apps/view/HELP.md");function rt(e){var t=Qe(Object(n.useState)(!1),2),r=t[0],l=t[1],o=e.buttonClassName,c=function(){return l(!r)};return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{href:tt,title:"Troubleshooting",target:"_blank",rel:"noreferrer noopener",className:p({className:o})},a.a.createElement(S,{name:"question-circle"})),a.a.createElement(b,{onClick:c,title:"App settings",className:o},a.a.createElement(S,{name:"sliders-h"})),a.a.createElement(We,{open:r,close:c}),a.a.createElement(Ke,null))}
function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
var at="".concat("f3 lh-title normal tc"," mv0 mh2"),lt="".concat("f3 lh-title normal tc"," mb3 bb bt-0 br-0 bl-0 b--near-black");function ot(e){return a.a.createElement("h2",{className:at},e.children)}
function ct(e){return a.a.createElement("input",nt({type:"text",className:lt,autoComplete:"off","data-lpignore":"true"},e.field))}
function it(){var e=Object(l.useAppState)(),t=e.mode,r=e.dispatch;if(!t)return null;var n=[{mode:"layers",onClick:function(){return r(Object(l.setMode)("layers"))}},{mode:"top",onClick:function(){return r(Object(l.setMode)("top"))}},{mode:"bottom",onClick:function(){return r(Object(l.setMode)("bottom"))}}];return a.a.createElement("div",{className:"mt2"},n.map((function(e){return a.a.createElement(b,{key:e.mode,className:"dib tc",onClick:e.onClick},a.a.createElement("span",{className:c()("db w3 mt2 mh2 mb1 bw2 bb",t===e.mode?"b--brand":"b--transparent")},e.mode))})))}
var st=r(137);r(130),r(238),r(241),r(243);function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}
function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function ft(e){return{name:e.name,options:(t=e.options,mt({},t,{color:mt({},t.color,{sm:t.color.sm.slice(0,7)})})),gerberOptions:bt(e.gerberOptions),drillOptions:bt(e.drillOptions),layers:e.layers.reduce((function(e,t){return mt({},e,ut({},t.id,{side:t.side||"",type:t.type||"",color:t.color}))}),{})};var t}
function dt(e){var t=e.color,r=""!==e.outlineGapFill?Number(e.outlineGapFill):11e-5;return Number.isFinite(r)||(r=11e-5),t=mt({},t,{sm:"".concat(t.sm.slice(0,7)).concat("bf")}),mt({},e,{color:t,outlineGapFill:r})}
function pt(e,t){var r=e.coordinateFormat,n=e.zeroSuppression,a=e.units,l={};if(Array.isArray(r)){var o=r.map(Number);Number.isInteger(o[0])&&Number.isInteger(o[1])?l.coordinateFormat=[o[0],o[1]]:t.warn("Invalid coordinateFormat:",r)}
return n&&(l.zeroSuppression=n),a&&(l.units=a),l}
function bt(e){return{coordinateFormat:e.coordinateFormat||"",zeroSuppression:e.zeroSuppression||"",units:e.units||""}}
function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function yt(e){var t=ht(Object(n.useState)(!1),2),r=t[0],l=t[1],o=ht(Object(n.useState)(!1),2),s=o[0],u=o[1];i((function(){return u(!1)}),s?1200:null);var m=e.url,f=window.location,d=f.origin,p=f.pathname,b="".concat(d).concat(p),v=m?"".concat(b).concat("?boardUrl=").concat(encodeURIComponent(m)):"",E=c()("flex items-center mv0 lh-copy near-black bg-animate near-black",r?"bg-light-blue":"bg-white"),g=c()("flex-none ml1 nr4 br2 c-animate bg-animate",s?"white bg-brand":"near-black bg-white");return a.a.createElement(T,{className:"justify-center f6 lh-solid mb3",onCopy:function(e){u(!0),e.currentTarget.focus(),e.clipboardData.setData("text/plain",v),h(e)}},a.a.createElement("p",{className:E},a.a.createElement("span",{className:"fw3"},b,"?boardUrl="),a.a.createElement("span",null,m)),a.a.createElement(S,{name:"copy",className:g}),a.a.createElement("input",{type:"text",value:v,className:"clip",onClick:function(e){y(e),document.execCommand("copy")},onFocus:function(e){y(e),l(!0)},onBlur:function(){l(!1),u(!1)},readOnly:!0}))}
var Et="".concat("dib pa1"," absolute top-1 left-1 nt2 nl2 f4");function gt(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"absolute top-1 right-1 nt2 nr2 f4"},a.a.createElement(b,{type:"reset",className:"dib pa1",title:"Cancel"},a.a.createElement(S,{name:"times"})),a.a.createElement(b,{type:"submit",className:"dib pa1",title:"Save changes"},a.a.createElement(S,{name:"check",className:"green"}))),a.a.createElement(A,{onClick:e.delete,className:Et}))}
r(143);function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
var Nt=[{title:"default",color:{cf:"#cc9933",sm:"#004200",ss:"#ffffff"}},{title:"OSH Park",color:{cf:"#cc9933",sm:"#4b0082",ss:"#ffffff"}},{title:"SparkFun",color:{cf:"#f5f5f5",sm:"#cc0000",ss:"#ffffff"}}],Ot=["sm","ss","cf"],jt={sm:"soldermask",ss:"silkscreen",cf:"copper finish"},St=function(e){return e.slice(0,7)};function kt(e){var t=e.colorId,r=e.field,n=e.form,l=St("".concat(r.value));return a.a.createElement(T,{className:"h2"},a.a.createElement("span",{className:"mr-auto"},jt[t]),a.a.createElement("input",wt({},r,{value:l,type:"color",className:"clip",onChange:function(e){var a=St(e.target.value);"sm"===t&&(a+="bf"),n.setFieldValue(r.name,a)}})),a.a.createElement(F,{color:l}))}
function xt(e){return a.a.createElement(Ze.a,{name:e.fieldName,component:Ct})}
function At(e){return a.a.createElement(a.a.Fragment,null,Ot.map((function(t){return a.a.createElement(Ze.a,{key:t,name:"".concat(e.fieldName,".").concat(t),component:kt,colorId:t})})))}
function Ct(e){return a.a.createElement(a.a.Fragment,null,Nt.map((function(t){return a.a.createElement(It,wt({key:t.title},t,e))})))}
function It(e){var t=e.title,r=e.color,n=e.field,l=e.form,o=wt({},r,{sm:"".concat(St(r.sm)).concat("bf")}),c=Ot.every((function(e){return t=r[e],a=n.value[e],St(t)===St(a);var t,a})),i=c?"dot-circle":"circle";return a.a.createElement(T,{className:"h2"},a.a.createElement("input",{type:"radio",className:"clip",checked:c,onChange:function(){return l.setFieldValue(n.name,o)}}),a.a.createElement(S,{name:i,className:"flex-none nl2"}),a.a.createElement("span",{className:"lh-title mr-auto"},t),a.a.createElement(Ft,{boardColor:r}))}
function Ft(e){var t=e.boardColor;return a.a.createElement("div",{className:"flex-none tf-skew-15"},Ot.map((function(e,r,n){var l=t[e],o=t[n[r-1]]||null,i="light"===I()(l),s=o&&"light"===I()(o),u=c()("border-box dib w1 h1 v-mid",{"bt bb br b--near-black":i,bl:i&&!s});return a.a.createElement("span",{key:e,className:u,style:{backgroundColor:l}})})))}
function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
var Pt="bb bt-0 br-0 bl-0 bw1 tc near-black b--near-black bg-transparent code f6";function Vt(e){return a.a.createElement(z,Mt({className:"inline-flex v-mid"},e.field),"use outline layer for board shape")}
function Tt(e){var t=e.field,r=e.form,n=""!==t.value?t.value:11e-5,l=!r.values.options.useOutline,o=c()("inline-flex items-center pointer h2 v-mid fr",{"o-40":l});return a.a.createElement("label",{className:o},"gap fill limit",a.a.createElement("input",Mt({},t,{type:"text",className:c()(Pt,"w3 ml3 mr2"),disabled:l,value:n})),"mm")}
function Ut(e){var t=e.fieldName,r=e.renderName,n=e.overridden,l=e.defaultValue;return a.a.createElement(Rt,{fieldName:t,label:"".concat("override"," ").concat(r," ").concat("integer/decimal coordinate format"),overridden:n,defaultValue:l},a.a.createElement(Ze.a,{name:"".concat(t,"[0]"),placeholder:l?l[0]:"",type:"text",className:c()(Pt,"w2")}),a.a.createElement("span",{className:"dib mh2"},"."),a.a.createElement(Ze.a,{name:"".concat(t,"[1]"),placeholder:l?l[1]:"",type:"text",className:c()(Pt,"w2")}))}
function zt(e){var t=e.field,r=e.options,n=e.defaultValue;return a.a.createElement(a.a.Fragment,null,r.map((function(e){var r=(t.value||n)===e.value;return a.a.createElement(T,{key:e.value},a.a.createElement(U,Mt({},t,{type:"radio",key:e.value,value:e.value,checked:r})),a.a.createElement("span",{className:c()("dib ph2 ml2",{"bb bw1 b--brand":r})},e.label))})))}
function Lt(e){var t=e.fieldName,r=e.renderName,n=e.overridden,l=e.defaultValue;return a.a.createElement(Rt,{fieldName:t,label:"".concat("override"," ").concat(r," ").concat("zero suppression"),overridden:n,defaultValue:l},a.a.createElement(Ze.a,{name:t,component:zt,defaultValue:l,options:[{value:"L",label:"leading"},{value:"T",label:"trailing"}]}))}
function Bt(e){var t=e.fieldName,r=e.renderName,n=e.overridden,l=e.defaultValue;return a.a.createElement(Rt,{fieldName:t,label:"".concat("override"," ").concat(r," ").concat("units"),overridden:n,defaultValue:l},a.a.createElement(Ze.a,{name:t,component:zt,defaultValue:l,options:[{value:"in",label:"inches"},{value:"mm",label:"millimeters"}]}))}
function Dt(e){var t=e.form,r=e.defaultValue,n=e.label,l=Mt({},e.field,{checked:!!e.field.value,onBlur:function(){},onChange:function(n){var a=n.target.checked?r:"";t.setFieldValue(e.field.name,a)}});return a.a.createElement(z,l,n)}
function Rt(e){var t=e.fieldName,r=e.label,n=e.overridden,l=e.defaultValue,o=e.children;return a.a.createElement("div",{className:"flex items-center h2 mt1"},a.a.createElement(Ze.a,{name:t,component:Dt,defaultValue:l,label:r,className:"flex"}),a.a.createElement("div",{className:c()("flex flex-none ml-auto",{"o-40":!n})},o))}
function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}
return e}).apply(this,arguments)}
function Ht(e){return a.a.createElement("ul",{className:"list pl0 mv0"},e.children)}
function $t(e){var t=e.filename;return a.a.createElement("li",{className:"flex items-center mb3"},a.a.createElement("p",{className:"code f5 lh-title mv0 mr-auto"},t),e.children)}
function Gt(e){var t=e.layerId,r=e.form,n=e.field;return a.a.createElement("select",_t({},n,{className:"dib flex-none f5 w4 mr2",onChange:function(e){var n,a,l,o=e.target.value||"",c=r.values.layers[t],i=Object(Ee.e)(o),s=i.includes(c.side)?c.side:i[0]||"";r.setValues(_t({},r.values,{layers:_t({},r.values.layers,(n={},a=t,l=_t({},c,{type:o,side:s}),a in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l,n))}))}}),Ee.a.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})),a.a.createElement("option",{value:""},"n/a"))}
function qt(e){var t=e.layerId,r=e.field,n=e.form.values.layers[t].type,l=Object(Ee.e)(n),o=l.length<2;return l.length<1&&l.push(""),a.a.createElement("select",_t({className:"dib flex-none f5 w4 mr2",disabled:o},r),l.map((function(e){return a.a.createElement("option",{key:e,value:e},e===Ee.b||""===e?"n/a":e)})))}
function Wt(e){var t=e.layerId,r=e.field,n=""===e.form.values.layers[t].type;return a.a.createElement(T,{className:"h2",disabled:n},a.a.createElement(U,_t({type:"color",disabled:n},r)),a.a.createElement(F,{color:r.value,className:c()({"o-40":n})}))}
function Zt(e){var t=Object(l.useAppState)().dispatch,r=e.board,n=e.close,o=e.className,c=r.id,i=r.sourceUrl,s=r.layers,u=Object(Ee.c)(s,"gerber"),m=Object(Ee.c)(s,"drill"),f=function(){t(Object(l.deleteBoard)(c)),n()};return a.a.createElement(Ze.c,{initialValues:ft(r),onSubmit:function(e){t(Object(l.updateBoard)(c,function(e,t){var r,n=""!==e.options.outlineGapFill?Number(e.options.outlineGapFill):11e-5;return Number.isFinite(n)||(n=11e-5),{name:e.name,options:dt(e.options),gerberOptions:pt(e.gerberOptions,t),drillOptions:pt(e.drillOptions,t),layers:(r=e.layers,Object.keys(r).reduce((function(e,t){var n=r[t];return mt({},e,ut({},t,{type:n.type||null,side:n.side||null,color:n.color}))}),{}))}}(e,st.b))),n()},onReset:n},(function(e){return a.a.createElement(Ze.b,{className:o},a.a.createElement(gt,{delete:f}),a.a.createElement(Ze.a,{name:"name",component:ct}),i&&a.a.createElement(yt,{url:i}),a.a.createElement($,{title:"colors"},a.a.createElement(G,null,a.a.createElement(xt,{fieldName:"options.color"})),a.a.createElement(q,null,a.a.createElement(At,{fieldName:"options.color"}))),a.a.createElement($,{title:"render options"},a.a.createElement("div",null,a.a.createElement(Ze.a,{name:"options.useOutline",component:Vt}),a.a.createElement(Ze.a,{name:"options.outlineGapFill",component:Tt})),a.a.createElement(Ut,{fieldName:"gerberOptions.coordinateFormat",renderName:"gerber",defaultValue:u.coordinateFormat,overridden:!!e.values.gerberOptions.coordinateFormat}),a.a.createElement(Lt,{fieldName:"gerberOptions.zeroSuppression",renderName:"gerber",defaultValue:u.zeroSuppression,overridden:!!e.values.gerberOptions.zeroSuppression}),a.a.createElement(Bt,{fieldName:"gerberOptions.units",renderName:"gerber",defaultValue:u.units,overridden:!!e.values.gerberOptions.units}),a.a.createElement(Ut,{fieldName:"drillOptions.coordinateFormat",renderName:"drill",defaultValue:m.coordinateFormat,overridden:!!e.values.drillOptions.coordinateFormat}),a.a.createElement(Lt,{fieldName:"drillOptions.zeroSuppression",renderName:"drill",defaultValue:m.zeroSuppression,overridden:!!e.values.drillOptions.zeroSuppression}),a.a.createElement(Bt,{fieldName:"drillOptions.units",renderName:"drill",defaultValue:m.units,overridden:!!e.values.drillOptions.units})),a.a.createElement($,{title:"layers"},a.a.createElement(Ht,null,s.slice(0).sort(Ee.d).map((function(e){return a.a.createElement($t,{key:e.id,filename:e.filename},a.a.createElement(Ze.a,{name:"layers.".concat(e.id,".type"),component:Gt,layerId:e.id}),a.a.createElement(Ze.a,{name:"layers.".concat(e.id,".side"),component:qt,layerId:e.id}),a.a.createElement(Ze.a,{name:"layers.".concat(e.id,".color"),component:Wt,layerId:e.id}))})))))}))}
function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function Jt(e){var t=Xt(Object(n.useState)(!1),2),r=t[0],l=t[1],o=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=o.current;if(e){var t=(e.getBoundingClientRect().width-e.clientWidth)/2;e.style.transform="translateX(".concat(t,"px)")}}));var c=e.board,i=e.updating,s=function(){return l(!r)};return a.a.createElement("div",{className:"dib ph3 tc v-top w-third"},a.a.createElement("div",{className:"flex items-center justify-center"},a.a.createElement(ot,null,c.name),a.a.createElement(b,{onClick:s,disabled:i,className:"nr4",title:"Board settings"},a.a.createElement(S,{name:i?"spinner":"cog",faProps:{pulse:i}}))),a.a.createElement(it,null),a.a.createElement(f,{in:r},a.a.createElement("div",{className:"fixed top-1 left-0 right-0 bottom-1 z-1 nt2",onWheel:v},a.a.createElement("div",{className:"relative w-50 mxh-100 center pt2 ph4 br3 near-black bg-white shadow overflow-y-auto scrollbar-near-black",ref:o},a.a.createElement(Zt,{className:"dib w-100",board:c,close:s})))))}
var Kt=function(e){var t=e.open,r=e.handleFiles,n=e.handleUrl,l=e.close;return a.a.createElement(M,{title:"new board",open:t,close:l},a.a.createElement(T,null,a.a.createElement("span",{className:"mr-auto"},"upload files from your computer"),a.a.createElement(U,{type:"file",onChange:r,multiple:!0}),a.a.createElement(S,{name:"file-upload",className:p({className:"flex-none ml2 brand f4"})})),a.a.createElement("p",{className:"mv2 fw3 f6 i tc"},"or"),a.a.createElement(Ze.c,{initialValues:{url:""},onSubmit:function(e){return n(e.url)}},(function(e){return a.a.createElement(Ze.b,null,a.a.createElement("p",{className:"mt0 mb2 pt2"},"enter the URL of a ZIP archive"),a.a.createElement("span",{className:"flex items-bottom h2"},a.a.createElement(Ze.a,{name:"url",type:"text",className:"w-100 bb bt-0 br-0 bl-0 b--near-black code f7",placeholder:"https://tracespace.io/view/arduino-uno.zip"}),a.a.createElement(b,{type:"submit",disabled:!e.values.url},a.a.createElement(S,{name:"check",className:"flex-none ml2 brand f4"}))))})),a.a.createElement("footer",{className:"mt4 mb1 f7 lh-copy"},"you can also drag-and-drop files into the app at any time"))};function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw l}}
return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}
function tr(e){var t=Object(l.useAppState)(),r=t.board,o=t.loading,c=t.downloading,i=t.dispatch,s=Qt(Object(n.useState)(!1),2),u=s[0],m=s[1],f=e.buttonClassName,d=function(){return m(!u)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{className:f,onClick:d,disabled:o,title:"Upload Gerber/drill files"},a.a.createElement(S,{name:"plus"})),a.a.createElement(b,{className:f,onClick:function(){r&&i(Object(l.getBoardPackage)(r.id))},disabled:!r||c,title:"Download SVG renders"},a.a.createElement(S,{name:c?"spinner":"file-download",faProps:{pulse:c}})),a.a.createElement(Kt,{open:u,handleFiles:function(t){m(!1),e.handleFiles(t)},handleUrl:function(t){m(!1),e.handleUrl(t)},close:d}))}
function rr(){return a.a.createElement("footer",{className:"fixed right-1 bottom-1 w-third tr"},a.a.createElement("p",{className:"mv0 lh-copy f7 white"},"Â© 2015 - 2019 by ",a.a.createElement("a",{href:"https://mike.cousins.io",className:"link dim fw3 lightest-blue"},De.toLowerCase())," ","and ",a.a.createElement("a",{href:He,className:"link dim fw3 lightest-blue"},"contributors")),a.a.createElement("p",{className:"mv0 lh-copy f7 white"},a.a.createElement("a",{href:$e,className:"link dim fw3 lightest-blue"},"privacy policy")," | ",a.a.createElement("a",{href:_e,className:"link dim fw3 lightest-blue"},"view source")))}
function nr(e){var t=Object(l.useAppState)(),r=t.board,n=t.loading,o=t.updating,c=e.handleFiles,i=e.handleUrl,s=!n&&null!==r;return a.a.createElement("nav",{className:"flex items-start justify-between relative w-100 h3"},a.a.createElement(H,{subtitle:"view",className:"w-third flex-none"}),r&&a.a.createElement(d,{in:s,from:"top"},a.a.createElement(Jt,{board:r,updating:o})),a.a.createElement("div",{className:"flex-none flex items-start justify-end w-third"},a.a.createElement(tr,{buttonClassName:"ml1 pa1 f3",handleFiles:c,handleUrl:i}),a.a.createElement(rt,{buttonClassName:"ml1 pa1 f3"})),a.a.createElement(rr,null))}
function ar(e){var t=e.children,r=e.handleFiles;return a.a.createElement("label",{className:"db pv4 pointer"},a.a.createElement(U,{type:"file",onChange:r,multiple:!0}),a.a.createElement(S,{name:"plus",className:"dib f1 brand"}),t)}
function lr(e){var t,r,l=e.children,o=e.handleUrl,c=(t=Object(n.useRef)(null),Object(n.useEffect)((function(){t.current=window.location}),[]),t.current);return a.a.createElement(Ze.c,{initialValues:{url:(r=c,r?"".concat(r.origin).concat(r.pathname,"arduino-uno.zip"):"")},onSubmit:function(e){return o(e.url)},enableReinitialize:!0},(function(e){return a.a.createElement(Ze.b,null,a.a.createElement("label",{htmlFor:"load-files_url-input",className:"db pointer mb2"},l),a.a.createElement("div",{className:"flex items-bottom h2"},a.a.createElement(Ze.a,{id:"load-files_url-input",name:"url",type:"text",className:"w-100 mh2 bb bt-0 br-0 bl-0 b--near-black code f6 tc bg-transparent",onClick:y}),a.a.createElement(b,{type:"submit",className:"flex-none nr4 brand",disabled:!e.values.url},a.a.createElement(S,{name:"check"}))))}))}
function or(e){var t=Object(l.useAppState)(),r=t.mode,n=t.loading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(f,{in:n},a.a.createElement(S,{className:"".concat("absolute absolute--center near-black tc"," f1 brand"),name:"spinner",faProps:{pulse:!0}})),a.a.createElement(f,{in:!r&&!n},a.a.createElement("div",{className:"absolute absolute--center near-black tc"},a.a.createElement(ar,{handleFiles:e.handleFiles},a.a.createElement("p",{className:"mt3 mb0 f4 lh-copy"},"Upload your Gerber and drill files to render your board",a.a.createElement("br",null),a.a.createElement("span",{className:"f5 fw3"},"(","ZIP files work, too",")"))),a.a.createElement(lr,{handleUrl:e.handleUrl},"or enter the URL of a ZIP archive"))))}
function cr(e){var t=e.dismiss,r=e.children;return i(t,4e3),a.a.createElement("div",{className:"dib center fixed top-1 left-0 right-0 tc"},a.a.createElement("div",{className:"inline-flex items-center justify-center pl3 pv1 pr1 br2 bg-red white shadow"},a.a.createElement("p",{className:"mv0 mr2"},"Error: ",r),a.a.createElement(b,{onClick:t},a.a.createElement(S,{name:"times"}))))}
function ir(){var e=Object(l.useAppState)(),t=e.error,r=e.dispatch,n=s(t),o=n?n.message:null;return a.a.createElement(d,{in:!!t,from:"top"},a.a.createElement(cr,{dismiss:function(){return r(Object(l.dismissError)())}},t?t.message:o))}
t.default=function(){var e=Object(l.useAppState)().dispatch,t=function(t){var r="dataTransfer"in t?Array.from(t.dataTransfer.files):Array.from(t.target.files||[]);r.length>0&&e(Object(l.createBoard)(r,"dataTransfer"in t)),"value"in t.target&&(t.target.value=""),h(t)},r=function(t){t&&e(Object(l.createBoardFromUrl)(t))};return a.a.createElement(_,{onDragOver:h,onDrop:t},a.a.createElement(ve,null),a.a.createElement(Me,null),a.a.createElement(Be,null),a.a.createElement(nr,{handleFiles:t,handleUrl:r}),a.a.createElement(or,{handleFiles:t,handleUrl:r}),a.a.createElement(ir,null))}}}]);