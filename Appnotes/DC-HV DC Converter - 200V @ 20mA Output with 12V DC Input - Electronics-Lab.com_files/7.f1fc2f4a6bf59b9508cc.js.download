(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{114:function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return h}));t(71),t(75),t(76),t(77),t(72),t(39),t(245),t(69),t(73),t(66),t(67),t(74),t(70),t(68);var n=t(29),o=t.n(n),a=(t(143),t(128),t(127),t(119),t(130),t(115),t(125),t(139)),u=t(132);function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}
function i(){return(i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}
return e}).apply(this,arguments)}
var s=t(183),f=t(137),p=t(246),l=t(117),d=t(255);function y(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(n=(u=c.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}
return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function b(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}
function h(e){var r=y(Object(n.useState)(u.a),2),t=r[0],b=r[1],h=Object(n.useRef)(t),v=Object(n.useRef)((function(e){return e})),m={getState:function(){return h.current},dispatch:function(e){return v.current(e)}};return Object(n.useEffect)((function(){var e;v.current=[Object(s.a)(),Object(p.createRenderMiddleware)(),function(r){var t=r.dispatch;return Object(d.createAppDatabase)().then((function(r){e=r,t(l.fetchAppPreferences())})),function(r){return function(n){if(e){var o=e;switch(n.type){case l.FETCH_APP_PREFERENCES:Object(d.ensureAppPreferences)(o).then((function(e){return t(l.appPreferences(e))}));break;case l.UPDATE_APP_PREFERENCES:Object(d.updateAppPreferences)(o,n.payload).then((function(){return Object(d.ensureAppPreferences)(o)})).then((function(e){return t(l.appPreferences(e))}))}}
return r(n)}}},Object(f.a)()].reduceRight((function(e,r){return r(m)(e)}),(function(e){return h.current=function(e,r){switch(r.type){case a.b:return i({},e,{appPreferences:r.payload});case a.g:case a.h:return i({},e,{loading:!0});case a.m:case a.j:case a.i:return i({},e,{loading:!0});case a.r:var t=r.payload,n=t.id,o=t.update;return e.board&&e.board.id===n?i({},e,{updating:!0,board:i({},e.board,{name:o.name||e.board.name})}):e;case a.n:return i({},e,{downloading:!0});case a.o:return i({},e,{mode:r.payload});case a.p:var s=r.payload,f=s.id,p=s.solo,l=e.board,d=i({},e.layerVisibility,c({},f,p||!e.layerVisibility[f]));if(p){var y=(l?l.layers:[]).map((function(e){return e.id})).filter((function(e){return e!==f})),b=y.every((function(e){return!d[e]}));d=y.reduce((function(e,r){return i({},e,c({},r,b))}),d)}
return i({},e,{layerVisibility:d});case a.t:return i({},e,{savedBoards:r.payload});case a.e:var h=e.mode,v=e.layerVisibility,m=r.payload,w=m.layers.reduce((function(e,r){var t=v[r.id];return i({},e,c({},r.id,null==t||t))}),{});return i({},e,{board:m,layerVisibility:w,mode:h||"top",loading:!1,updating:!1});case a.f:var g=r.payload,O=e.savedBoards.map((function(e){return e.id===g.id?g:e}));return O.indexOf(g)<0&&O.push(g),i({},e,{savedBoards:O});case a.c:var R=r.payload,A=e.savedBoards.filter((function(e){return e.id!==R})),E=e.board,P=e.mode;return E&&E.id===R&&(E=null,P=null),i({},e,{mode:P,board:E,savedBoards:A,loading:!1});case a.d:return i({},e,{downloading:!1});case a.a:return u.a;case a.k:return i({},e,{error:null});case a.s:var j=i({},e,{error:r.payload.error});switch(r.payload.request.type){case a.g:case a.h:case a.j:case a.i:return i({},j,{loading:!1});case a.r:return i({},j,{updating:!1});case a.n:return i({},j,{downloading:!1})}
return j}
return e}(h.current,e),b(h.current),e}))}),[]),o.a.createElement(u.b.Provider,{value:m},e.children)}},176:function(e,r,t){"use strict";t.d(r,"a",(function(){return i}));t(39),t(69),t(66),t(67),t(164),t(70),t(247),t(68),t(249);var n=t(253),o=t(117),a=t(137),u=t(254),c=t.n(u);function i(){var e=new c.a;return function(r){var t=r.dispatch;return e.onmessage=function(e){a.b.debug("action received from RenderWorker",e.data.type),t(e.data)},function(r){return function(u){switch(u.type){case o.CREATE_BOARD:case o.CREATE_BOARD_FROM_URL:case o.GET_BOARD:case o.GET_BOARD_PACKAGE:case o.UPDATE_BOARD:case o.DELETE_BOARD:case o.DELETE_ALL_BOARDS:a.b.debug("sending action to RenderWorker",u.type),e.postMessage(u);break;case o.WORKER_INITIALIZED:var c=PCBGerberVtoolUrl;c&&t(o.createBoardFromUrl(c));break;case o.BOARD_PACKAGED:Object(n.saveAs)(u.payload.file,"".concat(u.payload.name,".zip"))}
return r(u)}}}}},178:function(e,r){},181:function(e,r){},246:function(e,r,t){"use strict";var n=t(176);t.d(r,"createRenderMiddleware",(function(){return n.a}));t(178)},254:function(e,r,t){e.exports=function(){return new Worker(PCBGerberVtoolData.jsUrl+"86cce45e483c7b4241c5.worker.js?v=nc")}},255:function(e,r,t){"use strict";t.d(r,"createAppDatabase",(function(){return a})),t.d(r,"ensureAppPreferences",(function(){return c})),t.d(r,"updateAppPreferences",(function(){return s}));t(71),t(75),t(76),t(128),t(256),t(77),t(129),t(127),t(72),t(39),t(119),t(130),t(69),t(73),t(66),t(115),t(125),t(141),t(67),t(257),t(93),t(74),t(136),t(70),t(68),t(259),t(260),t(181);function n(e,r,t,n,o,a,u){try{var c=e[a](u),i=c.value}catch(e){return void t(e)}
c.done?r(i):Promise.resolve(i).then(n,o)}
function o(e){return function(){var r=this,t=arguments;return new Promise((function(o,a){var u=e.apply(r,t);function c(e){n(u,o,a,c,i,"next",e)}
function i(e){n(u,o,a,c,i,"throw",e)}
c(void 0)}))}}
function a(){return u.apply(this,arguments)}
function u(){return(u=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(3).then(t.bind(null,182)).then((function(e){var r=new(0,e.default)("AppDatabase");return r.version(1).stores({preferences:"++"}),r})));case 1:case "end":return e.stop()}}),e)})))).apply(this,arguments)}
function c(e){return i.apply(this,arguments)}
function i(){return(i=o(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.transaction("rw",r.preferences,o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.preferences.toArray().then((function(e){if(0===e.length){var t={};return r.preferences.add(t).then((function(){return t}))}
return e[0]})));case 1:case "end":return e.stop()}}),e)})))));case 1:case "end":return e.stop()}}),e)})))).apply(this,arguments)}
function s(e,r){return f.apply(this,arguments)}
function f(){return(f=o(regeneratorRuntime.mark((function e(r,t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.preferences.toCollection().modify(t));case 1:case "end":return e.stop()}}),e)})))).apply(this,arguments)}},260:function(e,r,t){"use strict";t.d(r,"a",(function(){return f}));t(71),t(75),t(76),t(127),t(39),t(73),t(261),t(66),t(262),t(266),t(267),t(268),t(67),t(269),t(74),t(70),t(68);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
function o(e,r){return!r||"object"!==n(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}
function a(e){var r="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}
function n(){return u(e,arguments,s(this).constructor)}
return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)})(e)}
function u(e,r,t){return(u=c()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&i(o,t.prototype),o}).apply(null,arguments)}
function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}
function i(e,r){return(i=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}
function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
var f=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&i(e,r)}(a,e);var r,t,n=(r=a,t=c(),function(){var e,n=s(r);if(t){var a=s(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return o(this,e)});function a(e){var r;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,a),(r=n.call(this,e)).name=a.name,r}
return a}(a(Error))}}]);